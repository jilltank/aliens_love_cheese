<h1 class="center">Where are the spaceships?</h1>

<hr>

<br>

<div class="row">
	<div class="col-md-4">
		<div class="center">

			<h2>The Nearest Spaceships to You</h2>
				<% @spaceships.each do |s| %>
					<p>Ship Name: <%= s.name %></p>
					<p>Landed: <%= s.year %></p>
				<% end %>
			</div>

		</div>
	<div class="col-md-8">
		<div id="map">
		</div>
	</div>

</div>

	<script type="text/javascript">

	$(document).ready(function (){
		function initialize () {

			var mapOptions = {
				center: {lat: 33.784624, lng: -84.422030},
				zoom: 5,
				scrollwheel: false
			};

			var map = new google.maps.Map(document.getElementById('map'), mapOptions);

			var image = "<%= asset_path 'spaceship.png' %>"

			<% @spaceships.each do |s| %>

			var marker = new google.maps.Marker({
				position: {lat: <%= s.lat.to_f %>, lng: <%= s.long.to_f %>},
				map: map,
				title: "<%= s.name %>",
				icon: image,
				animation: google.maps.Animation.BOUNCE
			});

			var contentString = "<h3><%= s.name %></h3>";
			var infowindow = new google.maps.InfoWindow({content: contentString});
			google.maps.event.addListener(marker, 'click', function() {
				infowindow.open(map, marker);
			});

			<% end %>
		}

		google.maps.event.addDomListener(window, 'load', initialize);
	});

	</script>
